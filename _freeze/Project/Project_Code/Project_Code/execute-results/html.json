{
  "hash": "4f9de7120e0597d31b63c8d6ec4662b7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Project Code\"\nauthor: \"Brigitta Karen Tsai, Enrico Limberg, TzuTing Huang\"\ndate: \"March 19, 2025\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  message: false\n  freeze: true\n---\n\n\n# 1 Data Extraction\n\n## 1.1 Install and Load R Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(rvest,dplyr,stringr,purrr,\n               readr,httr,tidyr,fs,janitor,\n               tidyverse,knitr)\n```\n:::\n\n\n## 1.2 Download data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#This is the code where I downloaded the dataÔºö\nbase_url <- \"https://www.weather.gov.sg/files/dailydata/\"\n\n# Site corresponding file code\nstations <- c(\"Changi\"=\"S24\", \"Ang Mo Kio\"=\"S109\", \"Pulau Ubin\"=\"S106\", \n              \"East Coast Parkway\"=\"S107\", \"Seletar\"=\"S25\",\n              \"Clementi\"=\"S50\", \"Jurong (West)\"=\"S44\", \"Paya Lebar\"=\"S06\",\n              \"Newton\"=\"S111\", \"Pasir Panjang\"=\"S116\", \"Tai Seng\"=\"S43\",\n              \"Admiralty\" = \"S104\", \"Sembawang\" = \"S80\", \"Sentosa Island\" = \"S60\",\n              \"Jurong Island\" = \"S117\", \"Choa Chu Kang (South)\"=\"S121\",\n              \"Tuas South\"=\"S115\")\n\n# Define download time range\nyears <- 2024:2024\nmonths <- sprintf(\"%02d\", 1:12)  # 01, 02, ..., 12\n\n# Only data from January 2024 to December 2024 are retained\ndate_combinations <- expand.grid(Year = years, Month = months, stringsAsFactors = FALSE) %>%\n  filter(!(Year == 2024 & Month < \"01\"), # Exclude before Jan 2024\n         !(Year == 2024 & Month > \"12\")) # Exclude after Dec 2024\n\n# Create a directory to store data\ndir.create(\"data/aspatial\", showWarnings = FALSE)\n\n# Record failed downloads\nfailed_downloads <- data.frame(Station = character(), Year = integer(), Month = character(), File_URL = character(), stringsAsFactors = FALSE)\n\n# Iterate through stations, years, and months\nfor (station_name in names(stations)) {\n  station_code <- stations[[station_name]]\n  \n  for (i in 1:nrow(date_combinations)) {\n    year <- date_combinations$Year[i]\n    month <- date_combinations$Month[i]\n    \n    # Construct the file name\n    file_name <- paste0(\"DAILYDATA_\", station_code, \"_\", year, month, \".csv\")\n    \n    # Construct the full download URL\n    file_url <- paste0(base_url, file_name)\n\n    # Local save path\n    file_path <- file.path(\"data/aspatial\", file_name)\n    \n    # Check if the URL is valid\n    response <- HEAD(file_url)\n    \n    if (status_code(response) == 200) {\n      # Download the file\n      download.file(file_url, destfile = file_path, mode = \"wb\")\n      cat(\"‚úÖ Download successful:\", file_name, \"\\n\")\n    } else {\n      cat(\"‚ùå Download failed:\", file_name, \"\\n\")\n      \n      # Record the failed file\n      failed_downloads <- rbind(failed_downloads, data.frame(\n        Station = station_name,\n        Year = year,\n        Month = month,\n        File_URL = file_url\n      ))\n    }\n  }\n}\n\n# Save the failed download log\nif (nrow(failed_downloads) > 0) {\n  write.csv(failed_downloads, \"data/failed_downloads_log.csv\", row.names = FALSE)\n  cat(\"‚ö†Ô∏è The failed download files have been recorded: data/failed_downloads_log.csv\\n\")\n} else {\n  cat(\"üéâ All data downloaded successfully!\\n\")\n}\n```\n:::\n\n\n## 1.3 Merge data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(janitor)\n\n# Get all CSV files from the \"data\" folder that contain \"DAILYDATA_\" and \"2024\" in their names\nfiles <- list.files(\"data/aspatial\", pattern = \"^DAILYDATA_.*_2024.*\\\\.csv$\", full.names = TRUE)\n\n# Define a safe reading function to ensure all columns are initially read as characters\nsafe_read <- safely(~ read_csv(\n  .x,\n  col_types = cols(.default = \"c\"),  # Read all columns as character to prevent merging errors\n  locale = locale(encoding = \"UTF-8\")  # Ensure UTF-8 encoding\n) %>%\n  clean_names())  # Standardize column names\n\n# Read all files\nresults <- map(files, safe_read)\n\n# Filter out successful reads and combine data\nall_data <- results %>%\n  keep(~ is.null(.x$error)) %>%  # Keep only successfully read files\n  map_dfr(\"result\") %>%  # Combine them into a single dataframe\n  mutate(across(where(is.character) & !matches(\"station\"), ~ na_if(., \"-\"))) %>%  # Convert \"-\" to NA (except for \"station\" column)\n  mutate(across(where(is.character) & !matches(\"station\"), as.numeric))  # Convert character columns back to numeric (except \"station\")\n\n# Check the merged data structure\nglimpse(all_data)\n```\n:::\n\n\n## 1.4 Save to csv File\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(all_data, \"data/aspatial/weather.csv\", na = \"\", col_names = TRUE)\n```\n:::\n\n\n## 1.5 Remove Individual Files\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Delete all CSV files in the \"data\" folder\nfile.remove(list.files(\"data/aspatial\", pattern = \"^DAILYDATA_.*_2024.*\\\\.csv$\", full.names = TRUE))\n\ncat(\"üóëÔ∏è All individual CSV files have been deleted.\\n\")\n```\n:::\n\n\n# 2 Data Preparation\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sp, sf, raster, spatstat, tmap, tidyverse,\n               spNetwork, tmaptools)\n```\n:::\n\n\n## 2.1 Import Aspatial Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- read_csv(\"data/aspatial/weather.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 6222 Columns: 13\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\nchr  (1): station\ndbl (12): year, month, day, daily_rainfall_total_mm, highest_30_min_rainfall...\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n## 2.2 Import Geospatial Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmpsz <- st_read(dsn = \"data/geospatial\", \n                layer = \"MP14_SUBZONE_WEB_PL\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `C:\\brigittatsai\\ISSS608_AY2024-25_T2_Group1\\Project\\Project_Code\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n```\n\n\n:::\n:::\n\n\n# 3 Data Preparation\n\n## 3.1 Match Station Names\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsort(unique(weather$station))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Admiralty\"             \"Ang Mo Kio\"            \"Changi\"               \n [4] \"Choa Chu Kang (South)\" \"Clementi\"              \"East Coast Parkway\"   \n [7] \"Jurong (West)\"         \"Jurong Island\"         \"Newton\"               \n[10] \"Pasir Panjang\"         \"Paya Lebar\"            \"Pulau Ubin\"           \n[13] \"Seletar\"               \"Sembawang\"             \"Sentosa Island\"       \n[16] \"Tai Seng\"              \"Tuas South\"           \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsort(unique(mpsz$SUBZONE_N))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  [1] \"ADMIRALTY\"                     \"AIRPORT ROAD\"                 \n  [3] \"ALEXANDRA HILL\"                \"ALEXANDRA NORTH\"              \n  [5] \"ALJUNIED\"                      \"ANAK BUKIT\"                   \n  [7] \"ANCHORVALE\"                    \"ANG MO KIO TOWN CENTRE\"       \n  [9] \"ANSON\"                         \"BALESTIER\"                    \n [11] \"BANGKIT\"                       \"BAYFRONT SUBZONE\"             \n [13] \"BAYSHORE\"                      \"BEDOK NORTH\"                  \n [15] \"BEDOK RESERVOIR\"               \"BEDOK SOUTH\"                  \n [17] \"BENCOOLEN\"                     \"BENDEMEER\"                    \n [19] \"BENOI SECTOR\"                  \"BIDADARI\"                     \n [21] \"BISHAN EAST\"                   \"BOAT QUAY\"                    \n [23] \"BOON KENG\"                     \"BOON LAY PLACE\"               \n [25] \"BOON TECK\"                     \"BOULEVARD\"                    \n [27] \"BRADDELL\"                      \"BRAS BASAH\"                   \n [29] \"BRICKWORKS\"                    \"BUGIS\"                        \n [31] \"BUKIT BATOK CENTRAL\"           \"BUKIT BATOK EAST\"             \n [33] \"BUKIT BATOK SOUTH\"             \"BUKIT BATOK WEST\"             \n [35] \"BUKIT HO SWEE\"                 \"BUKIT MERAH\"                  \n [37] \"CAIRNHILL\"                     \"CECIL\"                        \n [39] \"CENTRAL SUBZONE\"               \"CENTRAL WATER CATCHMENT\"      \n [41] \"CHANGI AIRPORT\"                \"CHANGI BAY\"                   \n [43] \"CHANGI POINT\"                  \"CHANGI WEST\"                  \n [45] \"CHATSWORTH\"                    \"CHENG SAN\"                    \n [47] \"CHIN BEE\"                      \"CHINA SQUARE\"                 \n [49] \"CHINATOWN\"                     \"CHOA CHU KANG CENTRAL\"        \n [51] \"CHOA CHU KANG NORTH\"           \"CHONG BOON\"                   \n [53] \"CITY HALL\"                     \"CITY TERMINALS\"               \n [55] \"CLARKE QUAY\"                   \"CLEMENTI CENTRAL\"             \n [57] \"CLEMENTI NORTH\"                \"CLEMENTI WEST\"                \n [59] \"CLEMENTI WOODS\"                \"CLIFFORD PIER\"                \n [61] \"COMMONWEALTH\"                  \"COMPASSVALE\"                  \n [63] \"CONEY ISLAND\"                  \"CORONATION ROAD\"              \n [65] \"CRAWFORD\"                      \"DAIRY FARM\"                   \n [67] \"DEFU INDUSTRIAL PARK\"          \"DEPOT ROAD\"                   \n [69] \"DHOBY GHAUT\"                   \"DOVER\"                        \n [71] \"DUNEARN\"                       \"EAST COAST\"                   \n [73] \"EVERTON PARK\"                  \"FABER\"                        \n [75] \"FAJAR\"                         \"FARRER COURT\"                 \n [77] \"FARRER PARK\"                   \"FERNVALE\"                     \n [79] \"FLORA DRIVE\"                   \"FORT CANNING\"                 \n [81] \"FRANKEL\"                       \"GALI BATU\"                    \n [83] \"GEYLANG BAHRU\"                 \"GEYLANG EAST\"                 \n [85] \"GHIM MOH\"                      \"GOMBAK\"                       \n [87] \"GOODWOOD PARK\"                 \"GREENWOOD PARK\"               \n [89] \"GUILIN\"                        \"GUL BASIN\"                    \n [91] \"GUL CIRCLE\"                    \"HENDERSON HILL\"               \n [93] \"HILLCREST\"                     \"HILLVIEW\"                     \n [95] \"HOLLAND DRIVE\"                 \"HOLLAND ROAD\"                 \n [97] \"HONG KAH\"                      \"HONG KAH NORTH\"               \n [99] \"HOUGANG CENTRAL\"               \"HOUGANG EAST\"                 \n[101] \"HOUGANG WEST\"                  \"INSTITUTION HILL\"             \n[103] \"INTERNATIONAL BUSINESS PARK\"   \"ISTANA NEGARA\"                \n[105] \"JELEBU\"                        \"JOO KOON\"                     \n[107] \"JOO SENG\"                      \"JURONG GATEWAY\"               \n[109] \"JURONG ISLAND AND BUKOM\"       \"JURONG PORT\"                  \n[111] \"JURONG RIVER\"                  \"JURONG WEST CENTRAL\"          \n[113] \"KAKI BUKIT\"                    \"KALLANG BAHRU\"                \n[115] \"KALLANG WAY\"                   \"KAMPONG BUGIS\"                \n[117] \"KAMPONG GLAM\"                  \"KAMPONG JAVA\"                 \n[119] \"KAMPONG TIONG BAHRU\"           \"KAMPONG UBI\"                  \n[121] \"KANGKAR\"                       \"KATONG\"                       \n[123] \"KEAT HONG\"                     \"KEBUN BAHRU\"                  \n[125] \"KEMBANGAN\"                     \"KENT RIDGE\"                   \n[127] \"KHATIB\"                        \"KIAN TECK\"                    \n[129] \"KIM KEAT\"                      \"KOVAN\"                        \n[131] \"KRANJI\"                        \"LAKESIDE\"                     \n[133] \"LAVENDER\"                      \"LEEDON PARK\"                  \n[135] \"LEONIE HILL\"                   \"LIM CHU KANG\"                 \n[137] \"LITTLE INDIA\"                  \"LIU FANG\"                     \n[139] \"LORONG 8 TOA PAYOH\"            \"LORONG AH SOO\"                \n[141] \"LORONG CHUAN\"                  \"LORONG HALUS\"                 \n[143] \"LORONG HALUS NORTH\"            \"LOWER SELETAR\"                \n[145] \"LOYANG EAST\"                   \"LOYANG WEST\"                  \n[147] \"MACKENZIE\"                     \"MACPHERSON\"                   \n[149] \"MALCOLM\"                       \"MANDAI EAST\"                  \n[151] \"MANDAI ESTATE\"                 \"MANDAI WEST\"                  \n[153] \"MARGARET DRIVE\"                \"MARINA CENTRE\"                \n[155] \"MARINA EAST\"                   \"MARINA EAST (MP)\"             \n[157] \"MARINA SOUTH\"                  \"MARINE PARADE\"                \n[159] \"MARITIME SQUARE\"               \"MARYMOUNT\"                    \n[161] \"MATILDA\"                       \"MAXWELL\"                      \n[163] \"MEI CHIN\"                      \"MIDVIEW\"                      \n[165] \"MONK'S HILL\"                   \"MOULMEIN\"                     \n[167] \"MOUNT EMILY\"                   \"MOUNT PLEASANT\"               \n[169] \"MOUNTBATTEN\"                   \"NASSIM\"                       \n[171] \"NATIONAL UNIVERSITY OF S'PORE\" \"NATURE RESERVE\"               \n[173] \"NEE SOON\"                      \"NEWTON CIRCUS\"                \n[175] \"NORTH-EASTERN ISLANDS\"         \"NORTH COAST\"                  \n[177] \"NORTHLAND\"                     \"NORTHSHORE\"                   \n[179] \"ONE NORTH\"                     \"ONE TREE HILL\"                \n[181] \"ORANGE GROVE\"                  \"OXLEY\"                        \n[183] \"PANDAN\"                        \"PANG SUA\"                     \n[185] \"PASIR PANJANG 1\"               \"PASIR PANJANG 2\"              \n[187] \"PASIR RIS CENTRAL\"             \"PASIR RIS DRIVE\"              \n[189] \"PASIR RIS PARK\"                \"PASIR RIS WAFER FAB PARK\"     \n[191] \"PASIR RIS WEST\"                \"PATERSON\"                     \n[193] \"PAYA LEBAR EAST\"               \"PAYA LEBAR NORTH\"             \n[195] \"PAYA LEBAR WEST\"               \"PEARL'S HILL\"                 \n[197] \"PEI CHUN\"                      \"PENG SIANG\"                   \n[199] \"PENJURU CRESCENT\"              \"PEOPLE'S PARK\"                \n[201] \"PHILLIP\"                       \"PIONEER SECTOR\"               \n[203] \"PLAB\"                          \"PORT\"                         \n[205] \"POTONG PASIR\"                  \"PULAU PUNGGOL BARAT\"          \n[207] \"PULAU PUNGGOL TIMOR\"           \"PULAU SELETAR\"                \n[209] \"PUNGGOL CANAL\"                 \"PUNGGOL FIELD\"                \n[211] \"PUNGGOL TOWN CENTRE\"           \"QUEENSWAY\"                    \n[213] \"RAFFLES PLACE\"                 \"REDHILL\"                      \n[215] \"RESERVOIR VIEW\"                \"RIDOUT\"                       \n[217] \"RIVERVALE\"                     \"ROBERTSON QUAY\"               \n[219] \"ROCHOR CANAL\"                  \"SAFTI\"                        \n[221] \"SAMULUN\"                       \"SAUJANA\"                      \n[223] \"SELEGIE\"                       \"SELETAR\"                      \n[225] \"SELETAR AEROSPACE PARK\"        \"SELETAR HILLS\"                \n[227] \"SEMAKAU\"                       \"SEMBAWANG CENTRAL\"            \n[229] \"SEMBAWANG EAST\"                \"SEMBAWANG HILLS\"              \n[231] \"SEMBAWANG NORTH\"               \"SEMBAWANG SPRINGS\"            \n[233] \"SEMBAWANG STRAITS\"             \"SENGKANG TOWN CENTRE\"         \n[235] \"SENGKANG WEST\"                 \"SENJA\"                        \n[237] \"SENNETT\"                       \"SENOKO NORTH\"                 \n[239] \"SENOKO SOUTH\"                  \"SENOKO WEST\"                  \n[241] \"SENTOSA\"                       \"SERANGOON CENTRAL\"            \n[243] \"SERANGOON GARDEN\"              \"SERANGOON NORTH\"              \n[245] \"SERANGOON NORTH IND ESTATE\"    \"SHANGRI-LA\"                   \n[247] \"SHIPYARD\"                      \"SIGLAP\"                       \n[249] \"SIMEI\"                         \"SIMPANG NORTH\"                \n[251] \"SIMPANG SOUTH\"                 \"SINGAPORE GENERAL HOSPITAL\"   \n[253] \"SINGAPORE POLYTECHNIC\"         \"SOMERSET\"                     \n[255] \"SOUTHERN GROUP\"                \"SPRINGLEAF\"                   \n[257] \"STRAITS VIEW\"                  \"SUDONG\"                       \n[259] \"SUNGEI ROAD\"                   \"SUNSET WAY\"                   \n[261] \"SWISS CLUB\"                    \"TAGORE\"                       \n[263] \"TAI SENG\"                      \"TAMAN JURONG\"                 \n[265] \"TAMPINES EAST\"                 \"TAMPINES NORTH\"               \n[267] \"TAMPINES WEST\"                 \"TANGLIN\"                      \n[269] \"TANGLIN HALT\"                  \"TANJONG IRAU\"                 \n[271] \"TANJONG PAGAR\"                 \"TANJONG RHU\"                  \n[273] \"TEBAN GARDENS\"                 \"TECK WHYE\"                    \n[275] \"TELOK BLANGAH DRIVE\"           \"TELOK BLANGAH RISE\"           \n[277] \"TELOK BLANGAH WAY\"             \"TENGAH\"                       \n[279] \"TENGEH\"                        \"THE WHARVES\"                  \n[281] \"TIONG BAHRU\"                   \"TIONG BAHRU STATION\"          \n[283] \"TOA PAYOH CENTRAL\"             \"TOA PAYOH WEST\"               \n[285] \"TOH GUAN\"                      \"TOH TUCK\"                     \n[287] \"TOWNSVILLE\"                    \"TRAFALGAR\"                    \n[289] \"TUAS BAY\"                      \"TUAS NORTH\"                   \n[291] \"TUAS PROMENADE\"                \"TUAS VIEW\"                    \n[293] \"TUAS VIEW EXTENSION\"           \"TUKANG\"                       \n[295] \"TURF CLUB\"                     \"TYERSALL\"                     \n[297] \"ULU PANDAN\"                    \"UPPER PAYA LEBAR\"             \n[299] \"UPPER THOMSON\"                 \"VICTORIA\"                     \n[301] \"WATERWAY EAST\"                 \"WENYA\"                        \n[303] \"WEST COAST\"                    \"WESTERN WATER CATCHMENT\"      \n[305] \"WOODGROVE\"                     \"WOODLANDS EAST\"               \n[307] \"WOODLANDS REGIONAL CENTRE\"     \"WOODLANDS SOUTH\"              \n[309] \"WOODLANDS WEST\"                \"WOODLEIGH\"                    \n[311] \"XILIN\"                         \"YEW TEE\"                      \n[313] \"YIO CHU KANG\"                  \"YIO CHU KANG EAST\"            \n[315] \"YIO CHU KANG NORTH\"            \"YIO CHU KANG WEST\"            \n[317] \"YISHUN CENTRAL\"                \"YISHUN EAST\"                  \n[319] \"YISHUN SOUTH\"                  \"YISHUN WEST\"                  \n[321] \"YUHUA EAST\"                    \"YUHUA WEST\"                   \n[323] \"YUNNAN\"                       \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmpsz <- mpsz %>%\n  mutate(SUBZONE_N = case_when(\n    SUBZONE_N == \"ADMIRALTY\" ~ \"Admiralty\",\n    SUBZONE_N == \"ANG MO KIO TOWN CENTRE\" ~ \"Ang Mo Kio\",\n    SUBZONE_N %in% c(\"CHANGI AIRPORT\", \"CHANGI BAY\", \n                     \"CHANGI POINT\", \"CHANGI WEST\") ~ \"Changi\",\n    SUBZONE_N == \"CHOA CHU KANG CENTRAL\" ~ \"Choa Chu Kang (South)\",\n    SUBZONE_N == \"CLEMENTI CENTRAL\" ~ \"Clementi\",\n    SUBZONE_N == \"EAST COAST\" ~ \"East Coast Parkway\",\n    SUBZONE_N == \"JURONG WEST CENTRAL\" ~ \"Jurong (West)\",\n    SUBZONE_N == \"JURONG ISLAND AND BUKOM\" ~ \"Jurong Island\",\n    SUBZONE_N == \"NEWTON CIRCUS\" ~ \"Newton\",\n    SUBZONE_N %in% c(\"PASIR PANJANG 1\", \"PASIR PANJANG 2\") ~ \"Pasir Panjang\",\n    SUBZONE_N %in% c(\"PAYA LEBAR EAST\", \"PAYA LEBAR NORTH\", \n                     \"PAYA LEBAR WEST\") ~ \"Paya Lebar\",\n    SUBZONE_N == \"PULAU UBIN\" ~ \"Pulau Ubin\",\n    SUBZONE_N %in% c(\"SELETAR\", \"SELETAR AEROSPACE PARK\") ~ \"Seletar\",\n    SUBZONE_N %in% c(\"SEMBAWANG CENTRAL\", \"SEMBAWANG EAST\", \"SEMBAWANG NORTH\",\n                     \"SEMBAWANG SPRINGS\", \"SEMBAWANG STRAITS\") ~ \"Sembawang\",\n    SUBZONE_N == \"SENTOSA\" ~ \"Sentosa Island\",\n    SUBZONE_N == \"TAI SENG\" ~ \"Tai Seng\",\n    SUBZONE_N == \"TUAS BAY\" ~ \"Tuas South\",\n    TRUE ~ SUBZONE_N\n  ))\n```\n:::\n\n\n## 3.2 Join Dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- left_join(mpsz, weather,\n                         by = c(\"SUBZONE_N\" = \"station\"),\n                         relationship = \"many-to-many\")\n```\n:::\n\n\n## 3.3 Remove Unnecessary Columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- subset(weather, select = -c(OBJECTID, SUBZONE_NO, SUBZONE_C,\n                                       PLN_AREA_C, REGION_C, FMEL_UPD_D, \n                                       CA_IND, INC_CRC))\n```\n:::\n\n\n## 3.4 Rename Columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- weather %>%\n  rename(Station = SUBZONE_N,\n         Area = PLN_AREA_N,\n         Region = REGION_N,\n         Year = year,\n         Month = month,\n         Day = day,\n         rainfall_total = daily_rainfall_total_mm,\n         rainfall_30 = highest_30_min_rainfall_mm,\n         rainfall_60 = highest_60_min_rainfall_mm,\n         rainfall_120 = highest_120_min_rainfall_mm,\n         mean_temp = mean_temperature_c,\n         max_temp = maximum_temperature_c,\n         min_temp = minimum_temperature_c,\n         mean_wind = mean_wind_speed_km_h,\n         max_wind = max_wind_speed_km_h)\n```\n:::\n\n\n## 3.5 Remove Missing Records\n\nDefine list of stations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstations <- c(\"Admiralty\", \"Ang Mo Kio\", \"Changi\", \"Choa Chu Kang (South)\",\n              \"Clementi\", \"East Coast Parkway\", \"Jurong (West)\",\n              \"Jurong Island\", \"Newton\", \"Pasir Panjang\", \"Paya Lebar\",\n              \"Pulau Ubin\", \"Seletar\", \"Sembawang\", \"Sentosa Island\",\n              \"Tai Seng\", \"Tuas South\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- weather %>% \n  filter(!(Station %in% stations & (is.na(rainfall_total) | is.na(rainfall_30) |\n                                    is.na(rainfall_60) | is.na(rainfall_120) |\n                                    is.na(mean_temp) | is.na(max_temp) |\n                                    is.na(min_temp) | is.na(mean_wind) |\n                                    is.na(max_wind))))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}